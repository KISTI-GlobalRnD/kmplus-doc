# KnowledgeMatrix Plus 매뉴얼

KnowledgeMatrix Plus의 사용자 매뉴얼 사이트입니다. [Docusaurus](https://docusaurus.io/)를 사용하여 구축되었습니다.

## 1. 개발 환경 개요

- **Node.js**: v20.0 이상 ([다운로드](https://nodejs.org/ko/download))
- **패키지 매니저**: npm
- **프레임워크**: Docusaurus 3.9.2
- **언어**: TypeScript

## 2. 프로젝트 설치 및 실행

### 프로젝트 클론

```bash
git clone https://github.com/KISTI-GlobalRnD/kmplus-doc.git
cd kmplus-doc
```

### 의존성 설치

```bash
npm install
```

### 로컬 개발 서버 실행

```bash
npm start
```

브라우저가 자동으로 열리며 `http://localhost:3000`에서 사이트를 확인할 수 있습니다. 대부분의 변경사항은 실시간으로 반영됩니다.

### 프로덕션 빌드

```bash
npm run build
```

정적 콘텐츠가 `build` 디렉토리에 생성됩니다.

### 빌드 결과 로컬 테스트

```bash
npm run serve
```

### PDF 생성

전체 매뉴얼을 PDF로 추출할 수 있습니다:

```bash
# 1. 프로덕션 빌드
npm run build

# 2. 로컬 서버 시작 (별도 터미널)
npm run serve

# 3. PDF 생성 (새 터미널)
npm run pdf:local
```

생성된 `kmplus-doc-full.pdf` 파일은 프로젝트 루트 폴더에 저장됩니다.

**특징:**

- 모든 문서 페이지를 하나의 PDF로 통합
- 표지 페이지 자동 생성
- 이미지 및 스타일 포함
- 페이지 번호 자동 추가

## 3. 문서 작성 방법

### 기본 문서 작성

`docs/` 폴더에 Markdown(`.md`) 파일을 작성합니다.

```markdown
---
title: 문서 제목
sidebar_label: 사이드바에 표시될 이름
sidebar_position: 1
---

# 문서 제목

문서 내용을 여기에 작성합니다.
```

### 폴더 구조

```
docs/
├── intro/              # 소개 섹션
│   ├── _category_.json # 카테고리 설정
│   ├── concepts.md
│   └── overview.md
├── guide/              # 가이드 섹션
│   ├── _category_.json
│   └── getting-started.md
```

### 사이드바 구성 방식

#### 1. 자동 생성 (현재 설정)

`sidebars.ts`에서 자동 생성 모드로 설정되어 있습니다:

```typescript
const sidebars: SidebarsConfig = {
  kmPlusSidebar: [{ type: 'autogenerated', dirName: '.' }],
};
```

폴더 구조에 따라 자동으로 사이드바가 생성됩니다.

#### 2. 카테고리(폴더) 설정

각 폴더에 `_category_.json` 파일을 추가하여 카테고리를 설정합니다:

```json
{
  "label": "소개",
  "position": 1,
  "collapsible": true,
  "collapsed": false
}
```

- `label`: 사이드바에 표시될 카테고리 이름
- `position`: 카테고리 정렬 순서 (숫자가 작을수록 위에 표시)
- `collapsible`: 접기/펼치기 가능 여부
- `collapsed`: 기본적으로 접힌 상태인지 (false = 펼쳐진 상태)

#### 3. 문서 순서 설정

각 Markdown 파일의 frontmatter에서 `sidebar_position`으로 순서를 지정합니다:

```markdown
---
title: 시작하기
sidebar_position: 1
---
```

같은 폴더 내의 문서들끼리 순서가 결정됩니다.

### 이미지 사용

이미지는 `static/img/screenshots/` 폴더에 저장하고 절대 경로로 참조합니다:

```markdown
![설명](/img/screenshots/screenshot.png)
```

추천 폴더 구조:
```
static/
└── img/
    ├── screenshots/  # 스크린샷
    ├── icons/        # 아이콘
    └── diagrams/     # 다이어그램
```

## 4. GitHub Pages 배포

### GitHub 저장소 설정

1. GitHub에서 저장소 생성 (이미 생성됨: `KISTI-GlobalRnD/kmplus-doc`)
2. Settings > Pages에서 Source를 "GitHub Actions"로 설정

### 수동 배포

`docusaurus.config.ts`에서 GitHub 설정을 확인하고:

```typescript
url: 'https://kisti-globalrnd.github.io',
baseUrl: '/kmplus-doc/',
organizationName: 'KISTI-GlobalRnD',
projectName: 'kmplus-doc',
```

다음 명령어로 배포:

**Windows (PowerShell):**

```powershell
$env:GIT_USER="KISTI-GlobalRnD"; npm run deploy
```

**Linux/macOS (Bash):**

```bash
GIT_USER=KISTI-GlobalRnD npm run deploy
```

## 프로젝트 구조

```
kmplus-doc/
├── docs/                    # 문서 파일들
├── static/                  # 정적 파일 (이미지 등)
│   └── img/
├── src/
│   └── css/
│       └── custom.css       # 커스텀 스타일
├── docusaurus.config.ts     # Docusaurus 설정
├── sidebars.ts              # 사이드바 설정
├── package.json             # 프로젝트 의존성
└── tsconfig.json            # TypeScript 설정
```

## 참고 자료

- [Docusaurus 공식 문서](https://docusaurus.io/)
- [Markdown 가이드](https://www.markdownguide.org/)
